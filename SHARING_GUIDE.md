# Руководство по запуску и демонстрации проекта

Этот гайд поможет вам запустить проект для локальной разработки и поделиться им с другими для демонстрации.

## Часть 1: Локальный запуск (для разработки)

Эти шаги позволят поднять всю инфраструктуру на вашем компьютере.

### Шаг 1: Настройка бэкенда

1.  **Перейдите в папку `backend`**:

    ```bash
    cd backend
    ```

2.  **Создайте файл `.env`**:
    Скопируйте файл `.env.example` в новый файл с именем `.env`. Этот файл содержит все необходимые переменные окружения для работы бэкенда.

    ```bash
    cp .env.example .env
    ```

    Для локального запуска вам не нужно ничего менять в этом файле.

3.  **Запустите все сервисы**:
    Эта команда запустит FastAPI бэкенд, базу данных PostgreSQL и хранилище MinIO в Docker-контейнерах.
    ```bash
    docker-compose up -d --build
    ```

### Шаг 2: Настройка фронтенда

1.  **Перейдите в папку `frontend`**:

    ```bash
    cd ../frontend
    ```

2.  **Установите зависимости**:

    ```bash
    npm install
    ```

3.  **Создайте файл `.env.local`**:
    Создайте в папке `frontend` файл `.env.local` и добавьте в него переменные, указывающие на ваши локальные сервисы:

    ```
    VITE_API_URL=http://localhost:8000
    VITE_MINIO_URL=http://localhost:9000
    ```

    _Замечание: Фронтенд-приложение на Vite ожидает, что переменные будут начинаться с префикса `VITE_`.\_

4.  **Запустите фронтенд**:
    ```bash
    npm run dev
    ```

### Шаг 3: Проверка

После выполнения всех шагов у вас будут работать:

- **Фронтенд (сайт)**: `http://localhost:5173` (или другой порт, указанный в терминале)
- **Бэкенд (API)**: `http://localhost:8000/docs`
- **MinIO (хранилище)**: `http://localhost:9001` (Логин: `minioadmin`, Пароль: `minioadmin`)

---

## Часть 2: Публичный доступ (для демонстрации)

Эта часть объясняет, как "прокинуть" ваши локальные сервисы в интернет с помощью `localtunnel`, чтобы проектом могли воспользоваться другие люди.

### Шаг 0: Убедитесь, что всё запущено локально

Выполните все шаги из Части 1. Ваш проект должен полноценно работать на `localhost`.

### Шаг 1: Установите `localtunnel`

Если у вас его еще нет, установите его глобально через npm:

```bash
npm install -g localtunnel
```

### Шаг 2: Создайте туннели для каждого сервиса

Вам понадобится открыть **три разных окна терминала**. В каждом из них вы запустите `localtunnel` для одного из ваших сервисов.

**Терминал 1 (для Фронтенда):**

```bash
lt --port 5173
```

> Вы получите публичный URL для вашего сайта, например: `https://pretty-donuts-agree.loca.lt`. **Это главная ссылка, которую вы будете давать людям.**

**Терминал 2 (для Бэкенда):**

```bash
lt --port 8000
```

> Вы получите URL для вашего API, например: `https://calm-crabs-applaud.loca.lt`.

**Терминал 3 (для MinIO):**

```bash
lt --port 9000
```

> Вы получите URL для вашего хранилища, например: `https://chubby-walls-yell.loca.lt`.

**Важно:** Скопируйте все три URL в безопасное место. Они понадобятся на следующем шаге.

### Шаг 3: Настройте публичные адреса

Теперь самое главное: ваш фронтенд и бэкенд должны "знать" публичные адреса друг друга.

1.  **Настройте Бэкенд**:

    - Откройте файл `backend/.env`.
    - Найдите строку `# MINIO_PUBLIC_URL=`.
    - Раскомментируйте ее и вставьте публичный URL, который вы получили для MinIO (из Терминала 3).
    - Пример:
      ```
      MINIO_PUBLIC_URL=https://chubby-walls-yell.loca.lt
      ```
    - **Перезапустите бэкенд**, чтобы он применил новые настройки:
      ```bash
      # Находясь в папке backend/
      docker-compose restart backend
      ```

2.  **Настройте Фронтенд**:
    - Откройте файл `frontend/.env.local`.
    - Замените `localhost` на публичные URL, которые вы получили для бэкенда и MinIO (из Терминалов 2 и 3).
    - Пример:
      ```
      VITE_API_URL=https://calm-crabs-applaud.loca.lt
      VITE_MINIO_URL=https://chubby-walls-yell.loca.lt
      ```
    - **Перезапустите фронтенд** (остановите процесс и снова запустите `npm run dev`), чтобы он подхватил новые переменные.

### Шаг 4: Демонстрация!

Готово! Теперь:

- Ваш компьютер должен быть включен.
- Все три терминала с `localtunnel` должны быть запущены.
- Вы даете людям **только одну ссылку** — ту, что ведет на ваш фронтенд (`https://pretty-donuts-agree.loca.lt`).

Когда они откроют сайт, он будет делать запросы на публичные адреса вашего бэкенда и MinIO, которые через туннели будут попадать на ваш локальный компьютер.
